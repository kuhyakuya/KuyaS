<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KuhyaKuya Studio</title>
<meta name="description" content="KuhyaKuya Studio – Jasa editing video fleksibel. Harga transparan, order cepat, dan detail kebijakan jelas." />

  <!-- ✅ favicon -->
  <link rel="icon" type="image/png" href="img/favicon.png"> <!-- path updated -->
  <link rel="apple-touch-icon" href="img/favicon.png"> <!-- path updated -->

  <style>
    :root{
      --bg:#1D1D1D; --card:#232323; --accent:#FF0072; --muted:#bfc3c6; --glass: rgba(255,255,255,0.03);
      --gold:#FFD54F; --detail:#555; --flip-duration:250ms; --disabled:#303030;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background:var(--bg);color:#fff;padding:32px;display:flex;justify-content:center;min-height:100vh}
    .container{max-width:1100px;width:100%;padding-bottom:60px}

    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;flex-wrap:wrap;gap:12px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo img{width:44px;height:44px;border-radius:8px;object-fit:cover}
    h1{font-size:18px}
    p.lead{color:var(--muted);font-size:13px;margin-top:4px;min-height:16px;transition:opacity .5s ease}

    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px}

    /* ===== Portfolio ===== */
    .portfolio-section h2{margin:40px 0 16px;font-size:18px}
    .portfolio-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}
    .portfolio-item{background:var(--card);padding:12px;border-radius:12px}
    .portfolio-item .video-wrapper{position:relative;aspect-ratio:16/9} /* responsive 16:9 */
    .portfolio-item .video-wrapper iframe,
    .portfolio-item .video-wrapper video{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:8px;background:#000;border:none} /* full-size media */
    .portfolio-item .flag{ /* payment status icon */
      width:16px; /* fixed icon width */
      height:16px; /* fixed icon height */
      vertical-align:middle; /* align icon with text */
      margin-right:6px; /* space between icon and text */
      object-fit:contain; /* keep image ratio */
    }
    .portfolio-item .flag.free{filter:brightness(0) invert(1);} /* turn free icon white */
    .portfolio-item .desc{color:var(--muted);margin-top:8px;font-size:14px} /* portfolio text */
    .pkg-highlight{ /* package label badge */
      display:inline-block; /* inline badge */
      background:rgba(255,0,114,0.1); /* light accent background */
      border:1px solid #FF0072; /* accent border */
      color:#FF0072; /* accent text color */
      font-weight:600; /* bold text */
      font-size:0.9em; /* slightly smaller font */
      padding:2px 6px; /* inner spacing */
      border-radius:6px; /* rounded corners */
      margin:0 2px; /* small horizontal gap */
      vertical-align:middle; /* align with text */
    } /* end badge style */
    .portfolio-toggle{display:inline-flex;align-items:center;gap:8px;margin-bottom:12px;cursor:pointer} /* click area for text+diamond */
    .portfolio-toggle .toggle-text{color:#FF0072;text-decoration:underline} /* styled label text */
    .portfolio-toggle .diamond{width:15px;height:15px;border:2px solid #FF0072;transform:rotate(45deg);border-radius:2px;background:transparent} /* diamond indicator */
    .portfolio-toggle.active .diamond{background:#FF0072} /* fill when active */

    .card{border-radius:12px;overflow:hidden;transition:height .3s ease;position:relative}
    .card-face{background:var(--card);border-radius:12px;padding:18px;
      box-shadow:0 6px 18px rgba(0,0,0,0.6);border:2px solid rgba(255,255,255,0.05);
      transform-origin:center center;transition:transform var(--flip-duration) ease, opacity var(--flip-duration) ease}
    .card-face.hide{display:none}

    .card-front h3{font-size:16px;margin-bottom:4px}
    .price-box{margin:10px 0}
    .old-price{font-size:12px;color:var(--muted);text-decoration:line-through;display:inline-block;margin-right:6px}
    .disc-badge{display:inline-block;background:var(--accent);color:#fff;font-size:11px;padding:2px 6px;border-radius:6px}
    .price{font-weight:700;font-size:20px;margin-top:2px}
    .meta{color:var(--muted);font-size:13px}
    .list{margin:12px 0 16px;padding-left:18px;color:var(--muted);font-size:14px}
    .badge{display:inline-block;background:var(--glass);padding:4px 10px;border-radius:999px;font-size:12px;color:var(--muted);margin-right:6px;margin-top:4px}

    .cta{text-align:right;margin-top:16px}
    .btn{background:var(--accent);color:white;padding:8px 12px;border-radius:10px;font-weight:600;
      cursor:pointer;text-decoration:none;display:inline-block;font-size:13px;border:none}
    .btn.detail{background:var(--detail);color:#fff}
    .btn[disabled]{background:var(--disabled)!important;color:#aaa;cursor:not-allowed;pointer-events:none}

    .card-back h4{margin-bottom:10px;font-size:15px;color:var(--gold)}
    .card-back ul{padding-left:18px;color:var(--muted)}
    .back-btn{margin-top:12px;background:var(--detail);color:#fff;border:none;padding:6px 10px;border-radius:8px;cursor:pointer;font-size:12px}

    footer{position:fixed;bottom:0;left:0;width:100%;background:var(--bg);color:var(--muted);
      font-size:13px;text-align:center;padding:8px 0;z-index:10}

    .rekom .card-face{border:2px solid var(--gold)!important;box-shadow:0 0 0 1px rgba(255,213,79,.3),0 6px 18px rgba(255,213,79,.25)}
    .ribbon{position:absolute;top:14px;right:14px;background:linear-gradient(135deg,var(--gold),#e6b800);
      color:#2a2200;font-weight:700;padding:4px 8px;border-radius:999px;font-size:11px;z-index:2}
  </style>
</head>
<body>
  <main class="container">
    <header>
      <div class="brand">
        <div class="logo"><img src="img/Logo.png" alt="Logo"></div> <!-- path updated -->
        <div>
          <h1>KuhyaKuya Studio</h1>
          <p class="lead" id="rotating-text">Hasil bisa di lihat di portofolio</p>
        </div>
      </div>
    </header>

    <section class="grid" id="packages"></section>

    <section class="portfolio-section">
      <h2>Portofolio</h2>
        <label id="pfToggle" class="portfolio-toggle" aria-label="Show Portofolio"> <!-- combined text+diamond -->
          <span class="toggle-text">Tampilkan</span> <!-- underlined label text -->
          <span class="diamond"></span> <!-- diamond indicator -->
        </label>
      <div class="portfolio-grid" id="portfolio" style="display:none"></div> <!-- hidden by default -->
    </section>

    <footer><small>© KuhyaKuya Studio</small></footer>
  </main>

  <script src="assets/pricing.js"></script>
  <script src="assets/portfolio.js"></script>
  <script>
    const texts=[
      "Harga transparan, kerjaan adil. Satu klik untuk hasil terbaik bagi client dan freelancer.",
      "Jam kerja: Kamis–Selasa 19:00–22:00 • Sabtu–Minggu 09:00–22:00"
    ];
    let idx=0; const el=document.getElementById('rotating-text');
    setInterval(()=>{ idx=(idx+1)%texts.length; el.style.opacity=0;
      setTimeout(()=>{ el.textContent=texts[idx]; el.style.opacity=1; },500);
    },5000);

    const FLIP_DURATION=250;

    async function loadPackages(){
      try{ const {prices,promo}=await Pricing.loadConfig("."); renderPackages(prices.packages,promo); }
      catch(e){ console.error("Load config error:",e); }
    }

    function renderPackages(packages,promo){
      const container=document.getElementById('packages');
      container.innerHTML='';
      packages.forEach(pkg=>{
        const {normal,percent,final}=Pricing.getFinalPrice(pkg,promo);
        const isRekom=checkRekom(promo,pkg.id);
        const wrapper=document.createElement('div');
        wrapper.className='card-wrapper';
        wrapper.innerHTML=`
          <div class="card${isRekom?' rekom':''}">
            <div class="card-face card-front">
              ${isRekom?'<div class="ribbon">Rekomendasi</div>':''}
              <h3>${escapeHtml(pkg.name)}</h3>
              <div class="meta">Revisi: ${pkg.revisions} • Durasi: ${pkg.durationText} • Waktu: ${pkg.leadTime}</div>
              <div class="price-box">
                ${percent>0?`<span class="old-price">IDR ${numberWithSeparators(normal)}</span><span class="disc-badge">-${percent}%</span>`:''}
                <div class="price">IDR ${numberWithSeparators(final)}</div>
              </div>
              <ul class="list">${(pkg.features||[]).map(f=>`<li>${escapeHtml(f)}</li>`).join('')}</ul>
              <div>${(pkg.tags||[]).map(t=>`<span class="badge">${escapeHtml(t)}</span>`).join('')}</div>
              <div class="cta">
                ${pkg.disabled
                  ? `<a class="btn" disabled>KOUTA HABIS</a>`
                  : `<a class="btn" href="./order.html?id=${pkg.id}">Buat Pesanan</a>`}
                <button class="btn detail flip-btn" type="button">Detail</button>
              </div>
            </div>
            <div class="card-face card-back hide">
              <h4>Kebijakan ${escapeHtml(pkg.name)}</h4>
              <ul>${(pkg.policy||["Tidak ada kebijakan tambahan"]).map(p=>`<li>${escapeHtml(p)}</li>`).join('')}</ul>
              <button class="back-btn">← Kembali</button>
            </div>
          </div>`;
        const front=wrapper.querySelector('.card-front');
        const back=wrapper.querySelector('.card-back');
        function flip(fromEl,toEl){
          fromEl.style.transform='scaleX(1)';toEl.style.transform='scaleX(0)';
          fromEl.style.opacity=1;toEl.style.opacity=0;
          fromEl.style.transition=`transform ${FLIP_DURATION}ms ease,opacity ${FLIP_DURATION}ms ease`;
          toEl.style.transition=`transform ${FLIP_DURATION}ms ease,opacity ${FLIP_DURATION}ms ease`;
          fromEl.style.transform='scaleX(0)';fromEl.style.opacity=0;
          setTimeout(()=>{
            fromEl.classList.add('hide');toEl.classList.remove('hide');
            toEl.style.transform='scaleX(0)';toEl.style.opacity=0;
            requestAnimationFrame(()=>{toEl.style.transform='scaleX(1)';toEl.style.opacity=1;});
          },FLIP_DURATION);
        }
        wrapper.querySelector('.flip-btn').addEventListener('click',()=>flip(front,back));
        wrapper.querySelector('.back-btn').addEventListener('click',()=>flip(back,front));
        container.appendChild(wrapper);
      });
    }

    function checkRekom(promo,id){
      if(!promo||!promo.recommended) return false;
      if(Array.isArray(promo.recommended)) return promo.recommended.map(String).includes(String(id));
      return String(promo.recommended)===String(id);
    }
    function numberWithSeparators(x){return x?.toString().replace(/\B(?=(\d{3})+(?!\d))/g,',')||'0'}
    function escapeHtml(s){return String(s||'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c]))}
    loadPackages();
    Portfolio.loadAndRender();
      const pfToggle=document.getElementById('pfToggle'); // get toggle label
      const pfGrid=document.getElementById('portfolio'); // get portfolio list
      pfToggle.addEventListener('click',()=>{ // attach click handler
        const show=pfGrid.style.display==='none'; // determine state
        pfGrid.style.display=show?'':'none'; // show/hide list
        pfToggle.classList.toggle('active',show); // toggle diamond fill
      }); // end handler
  </script>
</body>
</html>
